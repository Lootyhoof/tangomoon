/* ::::: titlebar ::::: */

#main-window[sizemode="normal"] > #titlebar {
  -moz-appearance: -moz-window-titlebar;
}

#main-window[sizemode="maximized"] > #titlebar {
  -moz-appearance: -moz-window-titlebar-maximized;
}

#titlebar-buttonbox {
  -moz-appearance: -moz-window-button-box;
}

#main-window[sizemode="maximized"] #titlebar-buttonbox {
  -moz-appearance: -moz-window-button-box-maximized;
}

.titlebar-placeholder[type="appmenu-button"] {
  margin-left: 4px;
}

.titlebar-placeholder[type="caption-buttons"] {
  margin-left: 10px;
}

/* titlebar command buttons */

#titlebar-min {
  -moz-appearance: -moz-window-button-minimize;
}

#titlebar-max {
  -moz-appearance: -moz-window-button-maximize;
}

#main-window[sizemode="maximized"] #titlebar-max {
  -moz-appearance: -moz-window-button-restore;
}

#titlebar-close {
  -moz-appearance: -moz-window-button-close;
}

/* ensure titlebar on privacy windows is of correct size */
#titlebar {
  height: 22px;
}

/* ensure extra titlebar doesn't appear on normal (e.g. non-privacy) windows */
#main-window:not([privatebrowsingmode=temporary]):not(:-moz-lwtheme) > #titlebar > #titlebar-content > #titlebar-buttonbox-container,
#main-window:not([drawintitlebar=true]):not(:-moz-lwtheme) > #titlebar {
  display: none;
}

#titlebar-spacer {
  display: none;
}

#titlebar-buttonbox-container {
  margin-left: 7px;
  margin-top: 3px;
}

#main-window:-moz-lwtheme > #titlebar {
  -moz-appearance: none;
}

/* Fix appcontent margins */
#appcontent {
  margin: 0 -5px;
}

/* Fix selected tab title */
.tabbrowser-tab[selected="true"]:not(:-moz-lwtheme) > * > * > .tab-text {
  color: black;
  text-shadow: none;
}

/* Blend the topmost toolbar with the titlebar */
#main-window[tabsontop=false] #nav-bar:not(:-moz-lwtheme),
#main-window[tabsontop=true] #TabsToolbar:not(:-moz-lwtheme) {
  -moz-appearance: toolbar;
}

/* Private browsing indicator */

#main-window[privatebrowsingmode=temporary] #titlebar-content {
  background-image: url("chrome://browser/skin/Privacy-16.png");
  background-repeat: no-repeat;
  background-size: auto;
}

#main-window[privatebrowsingmode=temporary] #titlebar-content {
  background-position: top 3px right 40px;
}

#main-window[privatebrowsingmode=temporary][inFullscreen] #titlebar-content {
  background-position: top 3px right 10px;
}

#main-window[privatebrowsingmode=temporary]:-moz-locale-dir(rtl) #titlebar-content {
  background-position: top 3px left 70px;
}

#main-window[privatebrowsingmode=temporary][inFullscreen]:-moz-locale-dir(rtl) #titlebar-content {
  background-position: top 3px left 10px;
}

#main-window[privatebrowsingmode=temporary][inFullscreen] #nav-bar[tabsontop=false] #titlebar-content {
  padding-inline-end: 50px !important;
}

@media (-moz-mac-lion-theme) {
  #main-window[privatebrowsingmode=temporary][inFullscreen] #TabsToolbar[tabsontop=true] #titlebar-content {
    padding-inline-end: 50px;
  }
}

@media not all and (-moz-mac-lion-theme) {
  #main-window[privatebrowsingmode=temporary] #titlebar-content {
    background-position: top 3px right 10px;
  }

  #main-window[privatebrowsingmode=temporary][inFullscreen][tabsontop=true] #window-controls #titlebar-content {
    padding-inline-end: 50px;
  }
}